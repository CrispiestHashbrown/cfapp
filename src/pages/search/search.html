<ion-content>

  <ion-item>
    <ion-searchbar
      type=text placeholder='Search Repositories' [(ngModel)]="searchQuery" (keyup.enter)="requestSearch(searchQuery, undefined)" clearInput>
    </ion-searchbar>
  </ion-item>

  <ion-row>
    <button ion-button small color=light (click)="requestSearch(searchQuery, undefined)">Run Search</button>
    <button ion-button small color=light >Advanced Search Options</button>
  </ion-row>

  <ion-item *ngIf="resultsCount===0; then thenBlock; else elseBlock"></ion-item>

  <ng-template #thenBlock>
      <ion-item>No Results.</ion-item>
  </ng-template>

  <ng-template #elseBlock>
    <ion-list>
      <ion-item *ngFor="let repo of searchResults">
        <h2 text-wrap class=repo strong=true clear (click)="navigateToGitHub(repo.url)">{{repo.fullName}}</h2> 
        <button ion-button color=commits>Commits</button>
        <button ion-button color=medium>
          <ion-icon slot="start" name="star">&nbsp;</ion-icon>
          {{repo.stars}}
        </button>
        <ion-badge class=language>{{repo.language}}</ion-badge>
        <ion-badge class=help>help wanted</ion-badge>
        <p padding-top=10px text-wrap>{{repo.description}}</p>
      </ion-item>
    </ion-list>
  </ng-template>

  <ion-infinite-scroll (ionInfinite)="renderMoreResults($event)">
    <ion-infinite-scroll-content 
      loadingSpinner="crescent"
      loadingText="Loading more data...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>

</ion-content>
